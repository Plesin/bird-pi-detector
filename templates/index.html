<!doctype html>
<html>
  <head>
    <title>Bird Camera Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¦ Bird Camera Viewer</h1>

      <div class="stats">
        <p><strong>ğŸ“Š Statistics</strong></p>
        <p>Total Photos: {{ photo_count }}</p>
        <p>Total Videos: {{ video_count }}</p>
        <p>Last Update: {{ current_time }}</p>
      </div>

      <button class="refresh-btn" onclick="location.reload()">
        ğŸ”„ Refresh Gallery
      </button>

      <ul class="tabs" role="tablist">
        <li role="presentation">
          <a class="tab-link" role="tab" href="#live" data-tab="live">Live</a>
        </li>
        <li role="presentation">
          <a class="tab-link" role="tab" href="#photos" data-tab="photos"
            >Photos</a
          >
        </li>
        <li role="presentation">
          <a class="tab-link" role="tab" href="#videos" data-tab="videos"
            >Videos</a
          >
        </li>
      </ul>

      <section class="tab-panel" data-tab="live" role="tabpanel">
        <h2>ğŸ“¹ Live Stream</h2>
        <div class="live-container">
          <div class="live-spinner show">
            <div class="spinner"></div>
          </div>
          <img
            data-src="{{ url_for('video_feed') }}"
            class="live-feed"
            alt="Live Camera Feed"
          />
        </div>
      </section>

      <section class="tab-panel" data-tab="photos" role="tabpanel">
        <h2>
          ğŸ“¸ Captured Photos{% if active_day_label %} - {{ active_day_label }}{%
          endif %}
        </h2>
        {% set media_type = 'photos' %} {% include '_day_section.html' with
        context %}
      </section>

      <section class="tab-panel" data-tab="videos" role="tabpanel">
        <h2>
          ğŸ¥ Captured Videos{% if active_day_label %} - {{ active_day_label }}{%
          endif %}
        </h2>
        {% set media_type = 'videos' %} {% include '_day_section.html' with
        context %}
      </section>
    </div>
    <dialog class="photo-dialog" id="photo-dialog">
      <div class="dialog-header">
        <div class="dialog-title" id="photo-dialog-title"></div>
        <button class="dialog-close" type="button" aria-label="Close">âœ•</button>
      </div>
      <img id="photo-dialog-image" alt="Preview" />
    </dialog>
    <script
      type="module"
      src="{{ url_for('static', filename='script.mjs') }}"
    ></script>
  </body>
</html>
